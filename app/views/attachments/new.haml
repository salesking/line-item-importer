%h2
  = t('link.step', step: 1, total: 3)
  = t('.page_title')

- if @attachment.errors.any?
  .alert-message.block-message.error
    %ul
      - @attachment.errors.full_messages.each do |i|
        %li=i

= form_for @attachment, method: 'patch' do |f|
  .clearfix
    = label_tag :column_separator, "#{Attachment.human_attribute_name(:column_separator)} <span class='required'> *</span>".html_safe
    .input
      = f.text_field :column_separator, class: 'minimi'
      %span.help-inline= t('.can_use_tab_character_html')
  .clearfix
    = label_tag :quote_character, "#{Attachment.human_attribute_name(:quote_character)} <span class='required'> *</span>".html_safe
    .input
      = f.text_field :quote_character, class: 'minimi'
  .clearfix
    = label_tag :encoding, "#{Attachment.human_attribute_name(:encoding)} <span class='required'> *</span>".html_safe
    .input
      = f.select :encoding, Encoding.name_list.sort_by{|word| word.downcase}, selected: 'UTF-8', class: 'input-mini'
      %span.info=t('.only_for_advanced_users')
  - if @attachment.new_record?
    .clearfix
      .input
        #file-upload
          %noscript
            %p=t('.enable_javascript')
  #csv-table.clearfix{style: ('display: none' if @attachment.new_record?)}
    %h2=t('.preview')
    %p=t('.preview_info')
    = link_to(image_tag('refresh.png', size: '16x16') + 'Reload', '#', id: 'csv-refresh')

  .actions
    = f.submit t('attachments.proceed_to_mapping'), class: 'btn btn-primary btn-large'
    = link_to t('link.back_to_list'), attachments_path, class: 'btn btn-secondary'
